---
import Layout from '../layouts/Layout.astro';
import OrganizationSchema from '../components/seo/OrganizationSchema.astro';
import FAQSchema from '../components/seo/FAQSchema.astro';
import BreadcrumbSchema from '../components/seo/BreadcrumbSchema.astro';
import ServiceSchema from '../components/seo/ServiceSchema.astro';
import LocalBusinessSchema from '../components/seo/LocalBusinessSchema.astro';
import { getAllServices, getAllCities } from '../lib/services';

// Get sample data
const services = getAllServices().slice(0, 3);
const cities = getAllCities().slice(0, 3);

// Sample FAQ data
const sampleFAQs = [
  {
    question: 'ما هي منصة إنقاذ؟',
    answer: 'منصة إنقاذ هي المنصة الرائدة للخدمات المنزلية في المملكة العربية السعودية، نربط بين العملاء ومقدمي الخدمات المعتمدين.'
  },
  {
    question: 'كيف أحجز خدمة؟',
    answer: 'يمكنك حجز الخدمة بسهولة من خلال البحث عن الخدمة المطلوبة، اختيار مقدم الخدمة، وتحديد الموعد المناسب.'
  },
  {
    question: 'هل الخدمات مضمونة؟',
    answer: 'نعم، جميع الخدمات مضمونة. نوفر ضمان على جودة العمل وإمكانية إعادة الخدمة في حالة عدم الرضا.'
  }
];

// Sample breadcrumb
const sampleBreadcrumb = [
  { name: 'الرئيسية', path: '/' },
  { name: 'اختبار SEO', path: '/seo-test' }
];

const pageTitle = 'صفحة اختبار SEO والبيانات المنظمة - إنقاذ';
const pageDescription = 'صفحة اختبار شاملة لجميع عناصر SEO والبيانات المنظمة (Schema.org) المستخدمة في منصة إنقاذ';
---

<Layout title={pageTitle} description={pageDescription} noindex={true}>
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold text-center mb-8">صفحة اختبار SEO والبيانات المنظمة</h1>
    
    <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-6 mb-8">
      <h2 class="text-2xl font-semibold mb-4">⚠️ تنبيه مهم</h2>
      <p class="text-gray-700 mb-2">
        هذه صفحة اختبار داخلية لفحص البيانات المنظمة. يحتوي على:
      </p>
      <ul class="list-disc list-inside space-y-1 text-gray-700">
        <li>جميع أنواع Schema.org المستخدمة في الموقع</li>
        <li>عناصر SEO الأساسية</li>
        <li>روابط لأدوات الاختبار الخارجية</li>
      </ul>
      <p class="text-sm text-gray-600 mt-4">
        ملاحظة: هذه الصفحة محددة بـ noindex لمنع ظهورها في نتائج البحث
      </p>
    </div>

    <!-- Testing Tools Section -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold mb-6">🛠️ أدوات اختبار البيانات المنظمة</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <a 
          href="https://search.google.com/test/rich-results" 
          target="_blank" 
          rel="noopener noreferrer"
          class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition border-2 border-blue-200"
        >
          <h3 class="text-xl font-semibold mb-2">Google Rich Results Test</h3>
          <p class="text-gray-600 mb-4">اختبر النتائج المنسقة والتحقق من صحة البيانات المنظمة</p>
          <span class="text-blue-600 hover:underline">فتح الأداة →</span>
        </a>
        
        <a 
          href="https://validator.schema.org/" 
          target="_blank" 
          rel="noopener noreferrer"
          class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition border-2 border-green-200"
        >
          <h3 class="text-xl font-semibold mb-2">Schema.org Validator</h3>
          <p class="text-gray-600 mb-4">التحقق من صحة بنية البيانات المنظمة</p>
          <span class="text-green-600 hover:underline">فتح الأداة →</span>
        </a>
        
        <a 
          href="https://developers.facebook.com/tools/debug/" 
          target="_blank" 
          rel="noopener noreferrer"
          class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition border-2 border-purple-200"
        >
          <h3 class="text-xl font-semibold mb-2">Facebook Sharing Debugger</h3>
          <p class="text-gray-600 mb-4">اختبار Open Graph tags</p>
          <span class="text-purple-600 hover:underline">فتح الأداة →</span>
        </a>
        
        <a 
          href="https://cards-dev.twitter.com/validator" 
          target="_blank" 
          rel="noopener noreferrer"
          class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition border-2 border-gray-200"
        >
          <h3 class="text-xl font-semibold mb-2">Twitter Card Validator</h3>
          <p class="text-gray-600 mb-4">اختبار Twitter Cards</p>
          <span class="text-gray-600 hover:underline">فتح الأداة →</span>
        </a>
      </div>
    </section>

    <!-- Schema Types Section -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold mb-6">📊 أنواع Schema المستخدمة</h2>
      
      <div class="space-y-8">
        <!-- Organization Schema -->
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-2xl font-semibold mb-4">1. Organization Schema</h3>
          <p class="text-gray-600 mb-4">يستخدم في جميع الصفحات لتعريف المنظمة</p>
          <details class="bg-gray-50 p-4 rounded">
            <summary class="cursor-pointer font-medium">عرض الكود</summary>
            <pre class="mt-4 text-sm overflow-x-auto"><code>{JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "إنقاذ - Enqaz",
  "url": "https://enqaz.org",
  "logo": "https://enqaz.org/logo.png",
  "sameAs": ["https://facebook.com/enqaz", "https://twitter.com/enqaz"]
}, null, 2)}</code></pre>
          </details>
        </div>

        <!-- LocalBusiness Schema -->
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-2xl font-semibold mb-4">2. LocalBusiness Schema</h3>
          <p class="text-gray-600 mb-4">يستخدم في صفحات المدن</p>
          <div class="mb-4">
            <h4 class="font-semibold mb-2">صفحات المدن المتاحة:</h4>
            <div class="flex flex-wrap gap-2">
              {cities.map(city => (
                <a 
                  href={`/locations/${city.id}`} 
                  class="bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition"
                >
                  {city.nameAr}
                </a>
              ))}
            </div>
          </div>
        </div>

        <!-- Service Schema -->
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-2xl font-semibold mb-4">3. Service Schema</h3>
          <p class="text-gray-600 mb-4">يستخدم في صفحات الخدمات</p>
          <div class="mb-4">
            <h4 class="font-semibold mb-2">صفحات الخدمات المتاحة:</h4>
            <div class="flex flex-wrap gap-2">
              {services.map(service => (
                <a 
                  href={`/services/${service.id}`} 
                  class="bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition"
                >
                  {service.name}
                </a>
              ))}
            </div>
          </div>
        </div>

        <!-- FAQ Schema -->
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-2xl font-semibold mb-4">4. FAQ Schema</h3>
          <p class="text-gray-600 mb-4">يستخدم في الصفحات التي تحتوي على أسئلة شائعة</p>
          <details class="bg-gray-50 p-4 rounded">
            <summary class="cursor-pointer font-medium">عرض مثال</summary>
            <div class="mt-4">
              {sampleFAQs.map((faq, index) => (
                <div class="mb-3 p-3 bg-white rounded border">
                  <p class="font-semibold">س{index + 1}: {faq.question}</p>
                  <p class="text-gray-600 mt-1">ج: {faq.answer}</p>
                </div>
              ))}
            </div>
          </details>
        </div>

        <!-- Breadcrumb Schema -->
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-2xl font-semibold mb-4">5. BreadcrumbList Schema</h3>
          <p class="text-gray-600 mb-4">يستخدم لعرض مسار التنقل</p>
          <div class="bg-gray-100 p-3 rounded">
            {sampleBreadcrumb.map((item, index) => (
              <span>
                {index > 0 && <span class="mx-2">←</span>}
                <a href={item.path} class="text-blue-600 hover:underline">{item.name}</a>
              </span>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- SEO Elements Section -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold mb-6">🔍 عناصر SEO الأساسية</h2>
      
      <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="text-xl font-semibold mb-4">Meta Tags المستخدمة:</h3>
        <ul class="space-y-2">
          <li class="flex items-start gap-2">
            <span class="text-green-600">✓</span>
            <div>
              <strong>Title:</strong> طول مناسب (30-60 حرف)، يحتوي على كلمات مفتاحية
            </div>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-green-600">✓</span>
            <div>
              <strong>Description:</strong> وصف جذاب (150-160 حرف) مع دعوة للعمل
            </div>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-green-600">✓</span>
            <div>
              <strong>Canonical URL:</strong> محدد لتجنب المحتوى المكرر
            </div>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-green-600">✓</span>
            <div>
              <strong>Open Graph Tags:</strong> للمشاركة على وسائل التواصل
            </div>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-green-600">✓</span>
            <div>
              <strong>Robots Meta:</strong> تحكم في الفهرسة
            </div>
          </li>
        </ul>
      </div>
    </section>

    <!-- Performance Metrics -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold mb-6">⚡ مقاييس الأداء</h2>
      
      <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="text-xl font-semibold mb-4">Core Web Vitals المستهدفة:</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="bg-green-50 p-4 rounded">
            <h4 class="font-semibold">LCP</h4>
            <p class="text-2xl font-bold text-green-600">&lt; 2.5s</p>
            <p class="text-sm text-gray-600">Largest Contentful Paint</p>
          </div>
          <div class="bg-yellow-50 p-4 rounded">
            <h4 class="font-semibold">FID</h4>
            <p class="text-2xl font-bold text-yellow-600">&lt; 100ms</p>
            <p class="text-sm text-gray-600">First Input Delay</p>
          </div>
          <div class="bg-blue-50 p-4 rounded">
            <h4 class="font-semibold">CLS</h4>
            <p class="text-2xl font-bold text-blue-600">&lt; 0.1</p>
            <p class="text-sm text-gray-600">Cumulative Layout Shift</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Links -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold mb-6">🔗 روابط سريعة للاختبار</h2>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <a href="/" class="bg-gray-100 p-3 rounded text-center hover:bg-gray-200 transition">
          الرئيسية
        </a>
        <a href="/emergency" class="bg-red-100 p-3 rounded text-center hover:bg-red-200 transition text-red-700">
          طوارئ 24/7
        </a>
        <a href="/services/category/essential" class="bg-blue-100 p-3 rounded text-center hover:bg-blue-200 transition">
          خدمات أساسية
        </a>
        <a href="/services/category/specialized" class="bg-purple-100 p-3 rounded text-center hover:bg-purple-200 transition">
          خدمات متخصصة
        </a>
        <a href="/sitemap.xml" class="bg-green-100 p-3 rounded text-center hover:bg-green-200 transition">
          Sitemap
        </a>
        <a href="/robots.txt" class="bg-yellow-100 p-3 rounded text-center hover:bg-yellow-200 transition">
          Robots.txt
        </a>
        <a href="/services" class="bg-indigo-100 p-3 rounded text-center hover:bg-indigo-200 transition">
          جميع الخدمات
        </a>
        <a href="/locations" class="bg-pink-100 p-3 rounded text-center hover:bg-pink-200 transition">
          جميع المدن
        </a>
      </div>
    </section>
  </div>

  <!-- Include all schema types on this page for testing -->
  <OrganizationSchema />
  <FAQSchema faqs={sampleFAQs} />
  <BreadcrumbSchema items={sampleBreadcrumb} />
  <ServiceSchema service={{
    name: 'خدمة اختبار',
    description: 'وصف خدمة الاختبار',
    category: 'test',
    priceRange: '$$'
  }} />
  <LocalBusinessSchema 
    city={{
      name: 'test-city',
      nameAr: 'مدينة اختبار',
      region: 'منطقة اختبار'
    }}
    services={['خدمة 1', 'خدمة 2']}
  />
</Layout>