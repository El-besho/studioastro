---
import Layout from '../layouts/Layout.astro';
import { getAllServices } from '../lib/services';
import HomePage from '../components/HomePage.astro';
import { getSEOProps, generateCanonicalUrl } from '../lib/seo';

const allServices = getAllServices();
const essentialServices = allServices.filter(s => (s.category === 'essential' || s.category === 'emergency') && s.priority === 1).slice(0, 5);

const seoProps = getSEOProps('home', {
  canonical: generateCanonicalUrl('/')
});
---

<Layout {...seoProps}>
  <HomePage services={essentialServices} allServicesCount={allServices.length} />
</Layout>