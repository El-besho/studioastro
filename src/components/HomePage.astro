---
import { Button } from './ui/button';
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from './ui/card';
import { Input } from './ui/input';
import {
  CheckCircle,
  FileText,
  Hammer,
  MapPin,
  Search,
  Star,
  ShieldCheck,
  Users,
  MessageSquare,
  TrendingUp,
  ArrowRight,
} from 'lucide-react';
import { Badge } from './ui/badge';
import { ServiceGrid } from './service-grid';
import SearchForm from './SearchForm.tsx';
import TestimonialsSection from './TestimonialsSection.astro';

export interface Props {
  services: any[];
  allServicesCount: number;
}

const { services, allServicesCount } = Astro.props;


const howItWorksSteps = [
    {
        icon: MessageSquare,
        title: "ุงุทูุจ ุงูุฎุฏูุฉ",
        description: "ุญุฏุฏ ุงูุฎุฏูุฉ ุงูุชู ุชุญุชุงุฌูุง ููููุนู. ูููุง ุฒุงุฏุช ุงูุชูุงุตูู ุงูุชู ุชูุฏููุงุ ูุงูุช ุงูุนุฑูุถ ุงูุชู ุชุญุตู ุนูููุง ุฃูุถู."
    },
    {
        icon: FileText,
        title: "ุงุณุชูู ุงูุนุฑูุถ",
        description: "ูู ุบุถูู ุฏูุงุฆูุ ุณุชุจุฏุฃ ูู ุชููู ุนุฑูุถ ุฃุณุนุงุฑ ุชูุงูุณูุฉ ูู ูุญุชุฑููู ูุนุชูุฏูู ููุชุงุญูู ูู ููุทูุชู."
    },
    {
        icon: CheckCircle,
        title: "ุงุฎุชุฑ ุงูุฃูุถู",
        description: "ูุงุฑู ุจูู ุนุฑูุถ ุงูุฃุณุนุงุฑุ ูุงูุฑุฃ ุชููููุงุช ุงูุนููุงุก ุงูุณุงุจูููุ ูุงุฎุชุฑ ุงููุญุชุฑู ุงูุฐู ููุงุณุจ ุงุญุชูุงุฌุงุชู ูููุฒุงููุชู."
    }
]

const stats = [
    {
        icon: Users,
        value: "10,000+",
        label: "ุนููู ุฑุงุถู"
    },
    {
        icon: ShieldCheck,
        value: "1,200+",
        label: "ูุญุชุฑู ูุนุชูุฏ"
    },
    {
        icon: Hammer,
        value: "25,000+",
        label: "ุฎุฏูุฉ ููุชููุฉ"
    },
    {
        icon: MapPin,
        value: "20+",
        label: "ูุฏููุฉ ูุบุทุงุฉ"
    }
]

const popularQueries = [
    { query: "ุตูุงูุฉ ููููุงุช ุงูุฑูุงุถ", href: "/services/air-conditioning-hvac/riyadh" },
    { query: "ุดุฑูุฉ ุณุจุงูุฉ ุฌุฏุฉ", href: "/services/plumbing-services/jeddah" },
    { query: "ููู ููุฑุจุงุก ุงูุฏูุงู", href: "/services/electrical-services/dammam" },
    { query: "ุดุฑูุฉ ุชูุธูู ููุฉ", href: "/services/cleaning-services/makkah" },
    { query: "ุตูุงูุฉ ููุฒููุฉ ุงููุฏููุฉ", href: "/services/home-maintenance-repair/medina" },
    { query: "ุชุฑููุจ ูููู ุณุจููุช", href: "/services/air-conditioning-hvac/ac-install-split" },
    { query: "ุชูุธูู ููููุงุช", href: "/services/air-conditioning-hvac/ac-cleaning-split" },
    { query: "ุฅุตูุงุญ ุชุณุฑูุจุงุช ุงูููุงู", href: "/services/plumbing-services/leak-repair" },
    { query: "ุชุฑููุจ ุฅุถุงุกุฉ", href: "/services/electrical-services/light-install" },
    { query: "ุชูุธูู ุนููู", href: "/services/cleaning-services/home-deep-cleaning" },
    { query: "ููุงูุญุฉ ุงูุญุดุฑุงุช", href: "/services/pest-control/termite-control" },
    { query: "ุตูุงูุฉ ุบุณุงูุงุช", href: "/services/washing-machine-maintenance/washing-machine-repair" }
]
---

<div class="flex flex-col min-h-[100dvh]">
  <!-- Hero Section -->
  <section id="main-content" class="relative w-full pt-24 pb-12 md:pt-32 md:pb-24 lg:pt-40 lg:pb-32 overflow-hidden stable-layout" role="banner" aria-label="ุงููุณู ุงูุฑุฆูุณู">
    <!-- Enhanced Background decoration -->
    <div class="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 will-change-opacity" aria-hidden="true"></div>
    <div class="absolute top-20 right-10 w-72 h-72 bg-primary/10 rounded-full blur-3xl animate-pulse will-change-transform" aria-hidden="true"></div>
    <div class="absolute bottom-20 left-10 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse will-change-transform" style="animation-delay: 1s;" aria-hidden="true"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-gradient-to-r from-primary/5 to-accent/5 rounded-full blur-3xl opacity-50 will-change-opacity" aria-hidden="true"></div>
    
    <div class="container px-4 md:px-6 relative z-10">
      <div class="flex flex-col items-center space-y-6 text-center">
        <div class="space-y-4 animate-fade-in-up">
          <h1 class="font-headline text-4xl font-bold tracking-tighter sm:text-5xl md:text-6xl lg:text-7xl/none bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent">
            ุฃูุถู ุงูุฎุฏูุงุช ูููุฒูู ูุนููู ูู ุงูุณุนูุฏูุฉ
          </h1>
          <p class="mx-auto max-w-[700px] text-foreground/80 md:text-xl leading-relaxed">
            ูู ุงูุชูููู ูุงูุณุจุงูุฉ ุฅูู ุงูุตูุงูุฉ ุงูุนุงูุฉุ ุงุญุตู ุนูู ุนุฑูุถ ุฃุณุนุงุฑ
            ูุฌุงููุฉ ูู ุฃูุถู ุงููุญุชุฑููู ุงููุนุชูุฏูู.
          </p>
        </div>
        <div class="w-full max-w-2xl animate-fade-in-up animation-delay-200 mobile-search">
          <div class="relative">
            <SearchForm client:load />
            <div class="absolute -inset-1 bg-gradient-to-r from-primary/20 to-accent/20 rounded-xl blur opacity-30 group-hover:opacity-50 transition duration-1000 group-hover:duration-200" aria-hidden="true"></div>
          </div>
          <div class="mt-6 flex flex-col sm:flex-row gap-4 justify-center items-center">
            <a href="/emergency" class="flex items-center gap-2 bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition animate-pulse touch-target focus-ring-enhanced" aria-label="ุฎุฏูุงุช ุงูุทูุงุฑุฆ ุงููุชุงุญุฉ ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ">
              <span aria-hidden="true">๐จ</span>
              ุฎุฏูุงุช ุทูุงุฑุฆ 24/7
            </a>
            <a href="/services/category/essential" class="flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium touch-target focus-ring-enhanced" aria-label="ุนุฑุถ ุงูุฎุฏูุงุช ุงูุฃุณุงุณูุฉ">
              ุงูุฎุฏูุงุช ุงูุฃุณุงุณูุฉ
              <ArrowRight class="w-4 h-4" aria-hidden="true" />
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section id="services" class="w-full py-12 md:py-24 bg-muted/50" aria-labelledby="services-heading">
    <div class="container px-4 md:px-6">
      <div class="flex flex-col items-center justify-center space-y-4 text-center">
        <div class="space-y-2 animate-fade-in-up">
          <Badge class="font-headline bg-primary/10 text-primary hover:bg-primary/20">
            ุฎุฏูุงุชูุง ุงููุชุงุญุฉ
          </Badge>
          <h2 id="services-heading" class="font-headline text-3xl font-bold tracking-tighter sm:text-5xl">
            ุฎุฏูุงุชูุง ุงูุฃุณุงุณูุฉ
          </h2>
          <p class="max-w-[900px] text-foreground/80 md:text-xl/relaxed lg:text-base/relaxed xl:text-xl/relaxed">
            ุงูุชุดู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูุฎุฏูุงุช ุงูููุฒููุฉ ุงูุชู ููุฏููุง ุฃูุถู
            ุงููุญุชุฑููู ูู ุงูููููุฉ.
          </p>
        </div>
      </div>
      <div class="py-12">
        <ServiceGrid services={services} />
      </div>
       <div class="text-center animate-fade-in-up animation-delay-400">
        <Button variant="outline" asChild class="btn-hover-lift touch-target">
          <a href="/services" aria-label={`ุนุฑุถ ุฌููุน ุงูุฎุฏูุงุช ุงููุชุงุญุฉ (${allServicesCount}+ ุฎุฏูุฉ)`}>
            ุนุฑุถ ุฌููุน ุงูุฎุฏูุงุช ({allServicesCount}+)
          </a>
        </Button>
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section id="how-it-works" class="w-full py-12 md:py-24" aria-labelledby="how-it-works-heading">
    <div class="container px-4 md:px-6">
      <div class="flex flex-col items-center justify-center space-y-4 text-center">
        <div class="space-y-3 animate-fade-in-up">
          <Badge class="font-headline bg-primary/10 text-primary hover:bg-primary/20">
            ููู ูุนูู
          </Badge>
          <h2 id="how-it-works-heading" class="font-headline text-3xl font-bold tracking-tighter md:text-4xl/tight">
            ุงุญุตู ุนูู ุงูุฎุฏูุฉ ูู 3 ุฎุทูุงุช ุจุณูุทุฉ
          </h2>
          <p class="mx-auto max-w-[600px] text-foreground/80 md:text-xl/relaxed lg:text-base/relaxed xl:text-xl/relaxed">
            ุทูุจ ุงูุฎุฏูุฉ ุฃุตุจุญ ุฃุณูู ูุฃุณุฑุน ูู ุฃู ููุช ูุถู.
          </p>
        </div>
      </div>
      <div class="mx-auto max-w-2xl py-12 prose prose-lg dark:prose-invert">
            <ol class="timeline" role="list" aria-label="ุฎุทูุงุช ุทูุจ ุงูุฎุฏูุฉ">
                {howItWorksSteps.map((step, index) => (
                     <li key={index} data-step={index + 1} class="animate-fade-in-up" style={`animation-delay: ${index * 0.2}s; opacity: 0;`} role="listitem">
                        <div class='flex items-center gap-4 mb-2'>
                            <div class="flex items-center justify-center h-12 w-12 rounded-lg bg-muted text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-all duration-300" aria-hidden="true">
                                <step.icon class="w-6 h-6" />
                            </div>
                            <h3 class="font-bold text-lg font-headline m-0">{step.title}</h3>
                        </div>
                        <p class="text-muted-foreground">{step.description}</p>
                    </li>
                ))}
            </ol>
       </div>
    </div>
  </section>

  <!-- Stats Section -->
  <section id="stats" class="w-full py-12 md:py-24 bg-muted/50" aria-labelledby="stats-heading">
    <div class="container px-4 md:px-6">
       <div class="flex flex-col items-center justify-center space-y-4 text-center">
        <div class="space-y-3">
          <Badge class="font-headline bg-primary/10 text-primary hover:bg-primary/20">
            ููุงุฐุง ุชุฎุชุงุฑูุงุ
          </Badge>
          <h2 id="stats-heading" class="font-headline text-3xl font-bold tracking-tighter md:text-4xl/tight">
            ุฃุฑูุงููุง ุชุชุญุฏุซ ุนูุง
          </h2>
          <p class="mx-auto max-w-[600px] text-foreground/80 md:text-xl/relaxed lg:text-base/relaxed xl:text-xl/relaxed">
            ูุญู ููุฎุฑ ุจุจูุงุก ุดุจูุฉ ูุงุณุนุฉ ูู ุงูุซูุฉ ูุงูุงุญุชุฑุงููุฉ ูู ุฌููุน ุฃูุญุงุก ุงูููููุฉ.
          </p>
        </div>
      </div>
      <div class="mx-auto grid-features max-w-5xl items-start py-12" role="list" aria-label="ุฅุญุตุงุฆูุงุช ุงูููุตุฉ">
        {stats.map((stat, index) => (
            <div key={index} class="grid gap-2 text-center" role="listitem">
            <div class="flex justify-center">
              <div class="flex items-center justify-center rounded-full bg-primary/10 text-primary h-20 w-20 mb-4" aria-hidden="true">
                <stat.icon class="h-10 w-10" />
              </div>
            </div>
            <h3 class="font-headline text-3xl font-bold" aria-label={`${stat.value} ${stat.label}`}>{stat.value}</h3>
            <p class="text-muted-foreground">{stat.label}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <TestimonialsSection />


  <!-- CTA Section -->
  <section class="w-full py-12 md-py-24 lg:py-32" aria-labelledby="cta-heading">
    <div class="container grid items-center justify-center gap-4 px-4 text-center md:px-6">
      <div class="space-y-3">
        <h2 id="cta-heading" class="font-headline text-3xl font-bold tracking-tighter md:text-4xl/tight">
          ูู ุฃูุช ุฌุงูุฒ ูุทูุจ ุฎุฏูุชู ุงูุฃูููุ
        </h2>
        <p class="mx-auto max-w-[600px] text-foreground/80 md:text-xl/relaxed lg:text-base/relaxed xl:text-xl/relaxed">
          ุงุญุตู ุนูู ุนุฑูุถ ุฃุณุนุงุฑ ูุฌุงููุฉ ูู ุฃูุถู ุงููุญุชุฑููู ูู ูุฏููุชู. ุงูุนูููุฉ
          ุณุฑูุนุฉุ ูุฌุงููุฉุ ูุจุฏูู ุฃู ุงูุชุฒุงู.
        </p>
      </div>
      <div class="mx-auto w-full max-w-sm space-y-2">
        <Button
          type="submit"
          size="lg"
          class="w-full font-headline btn-hover-lift touch-target"
          variant="gradient"
          asChild
        >
          <a href="/services" aria-label="ุงุทูุจ ุนุฑุถ ุณุนุฑ ูุฌุงูู ูุฎุฏูุชู">ุงุทูุจ ุนุฑุถ ุณุนุฑ ูุฌุงูู</a>
        </Button>
        <p class="text-xs text-muted-foreground">
          ุจูุงูุงุชู ูู ุฃูุงู ุชุงู ูุนูุง.
        </p>
      </div>
    </div>
  </section>
</div>